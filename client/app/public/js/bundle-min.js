(function(){"use strict";angular.module("unuApp",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngRoute","ngSanitize","ngTouch","lumx","ui.router","restangular","angular-loading-bar","ngTable","anim-in-out","ngMaterial"]).config(["$stateProvider","$urlRouterProvider","RestangularProvider","$httpProvider",function(e,t,a,n){a.setBaseUrl("/api"),n.interceptors.push("AuthInterceptor"),a.setRestangularFields({id:"_id"}),t.otherwise("/");var o=function(e,t,a,n){var o;return o=t.defer(),e.getUser().then(function(e){switch(a.USER=e.user,a.USER._grupo.codigo){case n.MIC:a.app.name="M. Investigación Científica";break;default:a.app.name="Sistema de Matrícula"}o.resolve(!0)}),o.promise};o.$inject=["UserFactory","$q","$rootScope","TYPE_GROUP"],e.state("app",{url:"/home",views:{"@":{templateUrl:"views/app.html",controller:"AppCtrl as vm"}},resolve:{DataResolve:o}}).state("appalumno",{url:"/home-alumno",templateUrl:"views/appalumno.html",controller:"AppAlumnoCtrl",resolve:{DataResolve:function(e,t,a,n){var o;return o=a.defer(),e.getUser().then(function(e){var a;n.USER=e.user,a=t.all("alumno"),a.customGET("",{"filter[cod_alumno]":n.USER.username}).then(function(e){e.data.length>0&&(n.ALUMNO=e.data[0],o.resolve(!0))})}),o.promise}}}).state("appalumno.inicio",{url:"/inicio",templateUrl:"views/appalumno_inicio.html",controller:"AppalumnoinicioCtrl"}).state("appalumno.matricula",{url:"/matricula",templateUrl:"views/appalumno_matricula.html",controller:"AppalumnomatriculaCtrl"}).state("appalumno.matricularegister",{url:"/matricula-register",templateUrl:"views/appalumno_matricula_register.html",controller:"AppalumnomatricularegisterCtrl"}).state("login",{url:"/",templateUrl:"views/login.html",controller:"LoginCtrl"}).state("app.facultad",{url:"/facultades",templateUrl:"views/facultades/list.html",controller:"FacultadesCtrl"}).state("app.escuelas",{url:"/facultades/:id/escuelas",templateUrl:"views/escuelas/list.html",controller:"EscuelasCtrl"}).state("app.aulas",{url:"/aulas",templateUrl:"views/aulas/list.html",controller:"AulasCtrl"}).state("app.pabellones",{url:"/pabellones",templateUrl:"views/pabellones/list.html",controller:"PabellonesCtrl"}).state("app.docentes",{url:"/docentes",templateUrl:"views/docentes/list.html",controller:"DocentesCtrl"}).state("app.alumnos",{url:"/alumnos",templateUrl:"views/alumnos/list.html",controller:"AlumnosCtrl"}).state("app.periodos",{url:"/periodos",templateUrl:"views/periodos/list.html",controller:"PeriodosCtrl"}).state("app.cursos",{url:"/cursos",templateUrl:"views/cursos/list.html",controller:"CursosCtrl"}).state("app.planestudios",{url:"/planestudios",templateUrl:"views/planestudios/list.html",controller:"PlanestudiosCtrl"}).state("app.planestudiodetalles",{url:"/planestudiodetalles/:id/detalles",templateUrl:"views/planestudiodetalles/list.html",controller:"PlanEstudioDetallesCtrl"}).state("app.matriculaingresanteconsolidadoporanio",{url:"/reporte/matricula/ingresante/consolidadoporanio",templateUrl:"views/reports/matricula/ingresanteconsolidadoanio.html",controller:"ReportsMatriculaIngresanteconsolidadoanioCtrl"}).state("app.matriculaingresanteconsolidadoporgenero",{url:"/reporte/matricula/ingresante/consolidadoporgenero",templateUrl:"views/reports/matricula/ingresanteconsolidadogenero.html",controller:"ReportsMatriculaIngresanteconsolidadogeneroCtrl"}).state("app.matriculaingresantesdetalle",{url:"/reporte/matricula/ingresante/detalle",templateUrl:"views/reports/matricula/ingresantesdetalle.html",controller:"ReportsMatriculaIngresantesdetalleCtrl"}).state("app.asignaraulas",{url:"/asignaraulas",templateUrl:"views/asignaraulas/list.html",controller:"AsignarAulasCtrl"}).state("app.inicio",{url:"/inicio",templateUrl:"views/app_inicio.html",controller:"AppInicioCtrl"}).state("app.aprobacionplanestudios",{url:"/aprobacion/planestudios",templateUrl:"views/aprobacion/planestudios/list.html",controller:"AprobacionPlanestudiosCtrl"}).state("app.mic_asignaturas",{url:"/mic/asignaturas",templateUrl:"views/mic/asignaturas/list.html",controller:"MICAsignaturasCtrl"}).state("app.mic_revisionplanestudios",{url:"/mic/revision-planestudios",templateUrl:"views/mic/planestudios/list.html",controller:"MICRevisionPlanEstudiosCtrl"}).state("app.mic_silabus",{url:"/mic/silabus",templateUrl:"views/mic/silabus/list.html",controller:"MICSilabusCtrl"}).state("app.mic_silabus_detalle",{url:"/mic/silabus/:id",templateUrl:"views/mic/silabus/form.html",controller:"MICSilabusDetalleCtrl"}).state("app.mic_revisionsilabus",{url:"/mic/revision-silabus",templateUrl:"views/mic/revisionsilabus/list.html",controller:"MICRevisionSilabusCtrl"}).state("app.sesionaprendizaje",{url:"/mic/sesionaprendizaje",templateUrl:"views/mic/sesionaprendizaje/list.html",controller:"MICSesionAprendizajeCtrl"}).state("app.mic_sesionaprendizaje_detalle",{url:"/mic/sesionaprendizaje/:id",templateUrl:"views/mic/sesionaprendizaje/form.html",controller:"MICSesionaprendizajeDetalleCtrl"})}]).constant("TYPE_ALUMNO",{INGRESANTE:"ING"}).constant("TYPE_GROUP",{ADMIN:"ADMIN",ALUMNO:"ALUMNO",MIC:"MIC"}).filter("nospace",function(){return function(e){return e?e.replace(/ /g,""):""}}).value("scDateTimeConfig",{defaultTheme:"material",autosave:!1,defaultMode:"date",defaultDate:void 0,displayMode:void 0,defaultOrientation:!1,displayTwentyfour:!1,compact:!1}).filter("humanizeDoc",function(){return function(e){return e?"directive"===e.type?e.name.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}):e.label||e.name:void 0}})}).call(this),function(){"use strict";angular.module("unuApp").config(["$mdThemingProvider",function(e){e.theme("default").primaryPalette("teal",{"default":"600"}).accentPalette("pink",{"default":"500"}).warnPalette("defaultPrimary"),e.theme("dark","default").primaryPalette("defaultPrimary").dark(),e.theme("green","default").primaryPalette("teal"),e.theme("custom","default").primaryPalette("defaultPrimary",{"hue-1":"50"}),e.definePalette("defaultPrimary",{50:"#000000",100:"rgb(255, 198, 197)",200:"#E75753",300:"#E75753",400:"#E75753",500:"#E75753",600:"#E75753",700:"#E75753",800:"#E75753",900:"#E75753",A100:"#E75753",A200:"#E75753",A400:"#E75753",A700:"#E75753"})}])}.call(this),function(){"use strict";angular.module("unuApp").run(["$rootScope",function(e){e.inProgress=!1,e.app={name:"Sistema de Matrícula",module:"",corporation:"Universidad Nacional de Ucayali",developer:"Edinson Nuñez More",isTest:!0},e.errors={required:"Campo es requerido",email:"Campo email inválido",validateUnique:"Valor ya registrado"},e.Buttons={Save:"Guardar",Cancel:"Cancelar",New:"Nuevo"}}])}.call(this),function(){"use strict";var e=function(e,t,a){e.focusSection=function(e){console.log(e),t.go(e.url),a("left").toggle().then(function(){})}};e.$inject=["$scope","$state","$mdSidenav"],angular.module("unuApp").run(["$templateCache",function(e){e.put("partials/menu-link.tmpl.html",'<md-button ng-class="{\'{{section.icon}}\' : true}" \n ng-click="focusSection(section)">\n  {{section.title}}\n  <span  class="md-visually-hidden "\n    ng-if="isSelected()">\n    current page\n  </span>\n</md-button>\n')}]).directive("menuLink",["$state","$mdSidenav",function(t,a){return{scope:{section:"=",focusSection:"="},templateUrl:"partials/menu-link.tmpl.html",controller:e}}])}(),function(){angular.module("unuApp").run(["$templateCache",function(e){e.put("partials/menu-toggle.tmpl.html",'<md-button class="md-button-toggle"\n  ng-click="toggle(section)"\n  aria-controls="side-menu-{{section.title | nospace}}"\n  flex layout="row"\n  aria-expanded="{{isOpen()}}">\n  {{section.title}}\n  <span aria-hidden="true" class=" pull-right fa fa-chevron-down md-toggle-icon"\n  ng-class="{\'toggled\' : section.active}"></span>\n</md-button>\n<ul ng-show="section.active" id="side-menu-{{section.title | nospace}}" class="menu-toggle-list">\n  <li ng-repeat="page in section.children">\n    <menu-link section="page"></menu-link>\n  </li>\n</ul>\n')}]).directive("menuToggle",function(){return{scope:{section:"=",toggle:"="},templateUrl:"partials/menu-toggle.tmpl.html",link:function(e){e.isOpen=function(){},e.toggle=function(e){e.active=!e.active}}}})}(),function(){"use strict";angular.module("unuApp").directive("navScroll",["$window",function(e){return function(t,a,n){angular.element(e).bind("scroll",function(){this.pageYOffset>155?t.boolChangeClass=!0:t.boolChangeClass=!1,t.$apply()})}}])}.call(this),function(){"use strict";angular.module("unuApp").directive("validateUnique",["Restangular","$timeout",function(e,t){return{require:"ngModel",scope:{attribute:"@",minlengthvalidation:"@",queryModel:"@",url:"@",filtertimeout:"="},link:function(a,n,o,l){a.minlengthvalidation=a.minlengthvalidation||0;var i=function(e){a.filterTimeout&&t.cancel(a.filterTimeout),a.filterTimeout=t(function(){e()},1e3)};return l.$parsers.unshift(function(t){var n;return i(function(){n=e.all(a.queryModel),n.customGET("/methods/validate-unique",{value:t,attribute:a.attribute}).then(function(e){return e.success?l.$setValidity("validateUnique",!0):l.$setValidity("validateUnique",!1)})}),t})}}}])}.call(this),function(){"use strict";angular.module("unuApp").service("AuthInterceptor",["AuthTokenFactory",function(e){return{request:function(t){var a;return a=e.getToken(),a&&(t.headers=t.headers||{},t.headers.Authorization="unu "+a),t}}}])}.call(this),function(){"use strict";angular.module("unuApp").service("AuthTokenFactory",["$window",function(e){var t,a;return a=e.localStorage,t="auth-token",{getToken:function(){return a.getItem(t)},setToken:function(e){e?a.setItem(t,e):a.removeItem(t)}}}])}.call(this),function(){"use strict";angular.module("unuApp").factory("MessageFactory",[function(){return{Buttons:{Add:"Agregar",New:"Nuevo",Edit:"Editar",Delete:"Eliminar",Save:"Guardar",Cancel:"Cancelar",Yes:"Si",No:"No"},Form:{New:"Agregar {element}",Edit:"Editar {element}",Delete:"Eliminar {element}",Saved:"Registro satisfactorio",Updated:"Actualización satisfactoria",Deleted:"Se quito el elemento",QuestionDelete:"¿Desea eliminar el elemento seleccionado?",Required:"Campo es requerido",validateUnique:"Valor ya se encuentra registrado"}}}])}.call(this),function(){"use strict";angular.module("unuApp").factory("ToastMD",["$mdToast",function(e){return{info:function(t){e.show({template:'<md-toast><span class="tc-blue-900 fa fa-info-circle fa-lg"></span>&nbsp;'+t+"</md-toast>",hideDelay:4e3,position:"top right"})},success:function(t){e.show({template:'<md-toast><span class="tc-green-900 fa fa-check fa-lg"></span>&nbsp;'+t+"</md-toast>",hideDelay:4e3,position:"top right"})},warning:function(t){e.show({template:'<md-toast><span class="tc-yellow-900 fa fa-exclamation-triangle fa-lg"></span>&nbsp;'+t+"</md-toast>",hideDelay:4e3,position:"top right"})},error:function(t){e.show({template:'<md-toast><span class="tc-red-900 fa fa-exclamation-triangle fa-lg"></span>&nbsp;'+t+"</md-toast>",hideDelay:4e3,position:"top right"})}}}])}.call(this),function(){"use strict";angular.module("unuApp").factory("UserFactory",["Restangular","$log","$state","$rootScope","AuthTokenFactory","ToastMD","$timeout","TYPE_GROUP",function(e,t,a,n,o,l,i,s){var r;return r=e.all("usuarios"),{login:function(t){r.customPOST(t,"auth/login").then(function(t){var l;o.setToken(t.token),console.log(t),l=e.all("usuarios"),l.customGET("auth/me",{}).then(function(e){var t;switch(console.log(e.user),n.USER=e.user,t=n.USER._grupo.codigo){case s.ADMIN:n.app.name="Sistema de Matrícula";break;case s.MIC:n.app.name="M. Investigación Científica"}a.go("app")})},function(e){l.warning(e.data.message)})},logout:function(){o.setToken(),a.go("login")},getUser:function(){return o.getToken()?r.customGET("auth/me",{}):{}},getAccess:function(){return n.USER._grupo.menu}}}])}.call(this),function(){"use strict";angular.module("unuApp").controller("AlumnosCtrl",["MessageFactory","$rootScope","$scope","Restangular","$mdDialog","$timeout","ngTableParams","LxDialogService","ToastMD","$mdBottomSheet","$state",,function(e,t,a,n,o,l,i,s,r,u,c){var d,m,f;a.UI={refresh:!1,message:e,title:"Listado de Alumnos",editMode:!1,selected:null,customActions:[]};var p={name:"Alumno",form:"views/alumnos/form.html",route:"alumnos",route_usuarios:"usuarios"};m=n.all(p.route),f=n.all(p.route_usuarios),t.app.module=" > "+p.name,d=function(){a.tableParams=new i({page:1,count:10},{total:0,getData:function(e,t){var n;n=t.url(),a.UI.refresh=!0,m.customGET("methods/paginate",n).then(function(n){l(function(){t.total(n.total),e.resolve(n.data),a.UI.refresh=!1},500)})}})},a.Refresh=function(){a.UI.selected=null,a.UI.editMode=!1,a.tableParams.reload()},a.New=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:a.tableParams},controller:function(e,t,a,n){e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.Buttons=n.Buttons,e.message=n.Form,e.Save=function(a){e.submited=!0,a.$valid&&m.post(e.model).then(function(){r.success(n.Form.Saved),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Edit=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:a.tableParams,model:n.copy(a.UI.selected)},controller:function(e,t,a,n,l){e.submited=!1,e.model=l,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){r.success(n.Form.Updated),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Delete=function(t){var l=o.confirm().title(p.name).content(e.Form.QuestionDelete).ariaLabel(p.name).targetEvent(t).ok(e.Buttons.Yes).cancel(e.Buttons.No),i=n.copy(a.UI.selected);o.show(l).then(function(){i.remove().then(function(){a.Refresh(),r.success(e.Form.Deleted)})},function(){})},a.EnabledEdit=function(e){a.UI.editMode=!1,a.UI.selected=null,angular.forEach(a.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(a.UI.editMode=!0,a.UI.selected=e,a.UI.selected.route=p.route)},new d}])}.call(this),function(){"use strict";angular.module("unuApp").controller("AppCtrl",["$scope","UserFactory","$rootScope","$mdSidenav","$log","$state",function(e,t,a,n,o,l){a.app.module="",a.menu=t.getAccess(),e.GoTo=function(e){return a.app.module=" > "+e.title,l.go(e.url),console.log(e.url)},e.SidenavToggle=function(){return n("left").toggle().then(function(){o.debug("close sidenav")})},e.Logout=function(){t.logout()}}])}(),function(){"use strict";angular.module("unuApp").controller("AprobacionPlanestudiosCtrl",["$mdSidenav","$q","MessageFactory","$rootScope","$scope","Restangular","$mdDialog","$timeout","NgTableParams","LxDialogService","ToastMD","$mdBottomSheet","$state",function(e,t,a,n,o,l,i,s,r,u,c,d,m){var f,p;o.UI={refresh:!1,message:a,title:"Listado de Planes de Estudio",editMode:!1,selected:null,customActions:[]};var g={name:"Plan de Estudio",form:"views/planestudios/form.html",route:"planestudios"};p=l.all(g.route),n.app.module=" > "+g.name,o.UI.customActions.push({icon:"fa-book",label:"Detalle Plan de Estudio",onclick:function(){m.go("app.planestudiodetalles",{id:o.UI.selected._id})}}),o.UI.customActions.push({icon:"fa-send",label:"Enviar para aprobación",onclick:function(){var e=l.copy(o.UI.selected);e.estado="Pendiente",e.put().then(function(){o.ListPlanEstudios()})}}),f=function(){o.tableParams=new r({page:1,count:10,filter:{estado:"Pendiente"}},{total:0,getData:function(e,t){var a;a=t.url(),o.UI.refresh=!0,p.customGET("methods/paginate",a).then(function(a){s(function(){t.total(a.total),e.resolve(a.data),o.UI.refresh=!1},500)})}}),o.tableParams.settings({counts:[]})},o.Refresh=function(){o.UI.selected=null,o.UI.editMode=!1,o.tableParams.reload()},o.filter={},o.Delete=function(e){var t=i.confirm().title(g.name).content(a.Form.QuestionDelete).ariaLabel(g.name).targetEvent(e).ok(a.Buttons.Yes).cancel(a.Buttons.No),n=l.copy(o.UI.selected);i.show(t).then(function(){n.remove().then(function(){o.Refresh(),c.info(a.Form.Deleted)})},function(){})},o.EnabledEdit=function(e){o.UI.editMode=!1,o.UI.selected=null,angular.forEach(o.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(o.UI.editMode=!0,o.UI.selected=e,o.UI.selected.route=g.route)},new f}])}.call(this),function(){"use strict";angular.module("unuApp").controller("AsignarAulasCtrl",function(e,t,a,n,o,l,i,s,r,u){function c(e){return console.log(e),angular.isObject(e)?e:{name:e,type:"new"}}function d(e){var t=e?a.periodos.filter(m(e)):[];return console.log(t),t}function m(e){var t=angular.lowercase(e);return function(e){return 0===e.nombre.indexOf(t)||0===e.periodo.indexOf(t)}}var f;a.UI={refresh:!1,message:e,title:"Asignación de Aulas",editMode:!1,selected:null,customActions:[]};var p={name:"Asignación de Aulas",form:"views/asignaraulas/form.html",route:"asignaraulas",route_pabellones:"pabellones",route_aulas:"aulas",route_facultades:"facultades",route_escuelas:"escuelas",route_periodos:"periodos"};f=n.all(p.route),t.app.module=" > "+p.name;n.all(p.route_facultades);a.facultades=[],a.escuelas=[],a.pabellones=[],a.aulas=[],a.periodos=[],a.periodosSeleccionados=[],a.transformChip=c,a.autocompleteDemoRequireMatch=!0,a.selectedItem=null,a.searchText=null,a.querySearch=d;var g=function(){var e=n.all(p.route_periodos);e.getList().then(function(e){a.periodos=e})},h=function(){var e=n.all(p.route_pabellones);e.getList().then(function(e){a.pabellones=e})};a.LoadAulas=function(){var e=n.all(p.route_aulas);e.getList({conditions:{_pabellon:a.filter._pabellon._id},populate:"_pabellon"}).then(function(e){a.aulas=e})};var v=function(){var e=n.all(p.route_facultades);e.getList().then(function(e){a.facultades=e})};h(),g(),v(),a.horarios=[{ini:"7:00 am",fin:"8:00 am"},{ini:"8:00 am",fin:"9:00 am"},{ini:"9:00 am",fin:"10:00 am"},{ini:"10:00 am",fin:"11:00 am"},{ini:"11:00 am",fin:"12:00 am"},{ini:"12:00 am",fin:"1:00 pm"},{ini:"2:00 am",fin:"3:00 am"},{ini:"3:00 am",fin:"4:00 am"},{ini:"4:00 am",fin:"5:00 am"},{ini:"5:00 am",fin:"6:00 am"},{ini:"6:00 am",fin:"7:00 am"},{ini:"7:00 am",fin:"8:00 am"},{ini:"8:00 am",fin:"9:00 am"},{ini:"9:00 am",fin:"10:00 am"},{ini:"10:00 am",fin:"11:00 am"}],a.handleCell=function(e,t,n){console.log(t),console.log(n),a.New(e,t,n)},a.New=function(e,t,l){var i=angular.element(document.body);o.show({parent:i,targetEvent:e,templateUrl:p.form,locals:{name:p.name,facultades:a.facultades,hora:t,aula:l},controller:function(e,t,a,l,i,s){e.facultades=l,e.submited=!1,e.title=a.Form.New.replace("{element}",t),e.model={},e.model.aula=s,e.model.horainicio=i.ini,e.model.horafin=i.fin,e.Buttons=a.Buttons,e.message=a.Form,e.LoadEcuelas=function(){var t=n.all(p.route_escuelas);t.getList({conditions:{_facultad:e.model._facultad._id},populate:"_facultad"}).then(function(t){e.escuelas=t})},e.Save=function(t){e.submited=!0,t.$valid&&f.post(e.model).then(function(){ToastMD.info(a.Form.Saved),o.hide()})},e.Cancel=function(){o.hide()}}})}})}.call(this),function(){"use strict";angular.module("unuApp").controller("AulasCtrl",function(e,t,a,n,o,l,i,s,r){var u,c;a.UI={refresh:!1,message:e,title:"Listado de Aulas",editMode:!1,selected:null,customActions:[]};var d={name:"Aula",form:"views/aulas/form.html",route:"aulas"};c=n.all(d.route),t.app.module=" > "+d.name,u=function(){a.tableParams=new i({page:1,count:10},{total:0,getData:function(e,t){var n;n=t.url(),a.UI.refresh=!0,c.customGET("methods/paginate",n).then(function(n){l(function(){t.total(n.total),e.resolve(n.data),a.UI.refresh=!1},500)})}})},a.Refresh=function(){a.UI.selected=null,a.UI.editMode=!1,a.tableParams.reload()},a.New=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:d.form,locals:{name:d.name,table:a.tableParams},controller:function(e,t,a,l){e.submited=!1,e.title=l.Form.New.replace("{element}",a),e.Buttons=l.Buttons,e.message=l.Form,n.all("pabellones").getList().then(function(t){e.pabellones=t}),e.Save=function(a){e.submited=!0,a.$valid&&c.post(e.model).then(function(){r.success(l.Form.Saved),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Edit=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:d.form,locals:{name:d.name,table:a.tableParams,model:n.copy(a.UI.selected)},controller:function(e,t,a,n,l){e.submited=!1,e.model=l,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){r.success(n.Form.Updated),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Delete=function(t){var l=o.confirm().title(d.name).content(e.Form.QuestionDelete).ariaLabel(d.name).targetEvent(t).ok(e.Buttons.Yes).cancel(e.Buttons.No),i=n.copy(a.UI.selected);o.show(l).then(function(){i.remove().then(function(){a.Refresh(),r.success(e.Form.Deleted)})},function(){})},a.EnabledEdit=function(e){a.UI.editMode=!1,a.UI.selected=null,angular.forEach(a.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(a.UI.editMode=!0,a.UI.selected=e,a.UI.selected.route=d.route)},new u})}.call(this),function(){"use strict";angular.module("unuApp").controller("CursosCtrl",function(e,t,a,n,o,l,i,s,r,u,c){var d,m;a.UI={refresh:!1,message:e,title:"Listado de Cursos",editMode:!1,selected:null,customActions:[]};var f={name:"Curso",form:"views/cursos/form.html",route:"cursos"};m=n.all(f.route),t.app.module=" > "+f.name,d=function(){a.tableParams=new i({page:1,count:10},{total:0,getData:function(e,t){var n;n=t.url(),a.UI.refresh=!0,m.customGET("methods/paginate",n).then(function(n){l(function(){t.total(n.total),e.resolve(n.data),a.UI.refresh=!1},500)})}})},a.Refresh=function(){a.UI.selected=null,a.UI.editMode=!1,a.tableParams.reload()},a.New=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{name:f.name,table:a.tableParams},controller:function(e,t,a,n){e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.Buttons=n.Buttons,e.message=n.Form,e.Save=function(a){e.submited=!0,a.$valid&&m.post(e.model).then(function(){r.info(n.Form.Saved),o.hide(),t.reload()},function(t){switch(console.log(t),t.status){case 422:e.ValidationError=t.data}})},e.Cancel=function(){o.hide()}}})},a.Edit=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{name:f.name,table:a.tableParams,model:n.copy(a.UI.selected)},controller:function(e,t,a,n,l){e.submited=!1,e.model=l,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){r.info(n.Form.Updated),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Delete=function(t){var l=o.confirm().title(f.name).content(e.Form.QuestionDelete).ariaLabel(f.name).targetEvent(t).ok(e.Buttons.Yes).cancel(e.Buttons.No),i=n.copy(a.UI.selected);o.show(l).then(function(){i.remove().then(function(){a.Refresh(),r.info(e.Form.Deleted)})},function(){})},a.EnabledEdit=function(e){a.UI.editMode=!1,a.UI.selected=null,angular.forEach(a.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(a.UI.editMode=!0,a.UI.selected=e,a.UI.selected.route=f.route)},new d})}.call(this),function(){"use strict";angular.module("unuApp").controller("DocentesCtrl",function(e,t,a,n,o,l,i,s,r,u,c){var d,m;a.UI={refresh:!1,message:e,title:"Listado de Docentes",editMode:!1,selected:null,customActions:[],tiposDedicacion:[],condiciones:[]};var f={name:"Docente",form:"views/docentes/form.html",route:"docentes"};m=n.all(f.route),t.app.module=" > "+f.name,m.customGET("model/tiposDedicacion",{}).then(function(e){a.UI.tiposDedicacion=e}),m.customGET("model/condiciones",{}).then(function(e){a.UI.condiciones=e}),m.customGET("model/grados",{}).then(function(e){a.UI.grados=e}),d=function(){a.tableParams=new i({page:1,count:10},{total:0,getData:function(e,t){var n;n=t.url(),a.UI.refresh=!0,m.customGET("methods/paginate",n).then(function(n){l(function(){t.total(n.total),e.resolve(n.data),a.UI.refresh=!1},500)})}})},a.Refresh=function(){a.UI.selected=null,a.UI.editMode=!1,a.tableParams.reload()},a.New=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{name:f.name,table:a.tableParams,condiciones:a.UI.condiciones,tiposDedicacion:a.UI.tiposDedicacion,grados:a.UI.grados},controller:function(e,t,a,l,i,s,u){e.submited=!1,e.title=u.Form.New.replace("{element}",a),e.Buttons=u.Buttons,e.message=u.Form,e.condiciones=l,e.tiposDedicacion=i,e.gradosdocente=s,n.all("facultades").getList().then(function(t){e.facultades=t}),e.Save=function(a){e.submited=!0,a.$valid&&m.post(e.model).then(function(){r.info(u.Form.Saved),o.hide(),t.reload()},function(e){switch(console.log(e),e.status){case 400:case 412:r.warning(e.data.message);break;case 500:r.error(e.data.message);break;default:r.warning(e.data.message)}})},e.Cancel=function(){o.hide()}}})},a.Edit=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{name:f.name,table:a.tableParams,model:n.copy(a.UI.selected)},controller:function(e,t,a,l,i){e.submited=!1,e.model=i,e.title=l.Form.Edit.replace("{element}",a),e.Buttons=l.Buttons,n.all("facultades").getList().then(function(t){e.facultades=t}),e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){r.info(l.Form.Updated),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Delete=function(t){var l=o.confirm().title(f.name).content(e.Form.QuestionDelete).ariaLabel(f.name).targetEvent(t).ok(e.Buttons.Yes).cancel(e.Buttons.No),i=n.copy(a.UI.selected);o.show(l).then(function(){i.remove().then(function(){a.Refresh(),r.info(e.Form.Deleted)})},function(){})},a.EnabledEdit=function(e){a.UI.editMode=!1,a.UI.selected=null,angular.forEach(a.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(a.UI.editMode=!0,a.UI.selected=e,a.UI.selected.route=f.route)},new d})}.call(this),function(){"use strict";angular.module("unuApp").controller("EscuelasCtrl",function(e,t,a,n,o,l,i,s,r,u,c,d){var m,f;n.UI={refresh:!1,message:t,title:"Listado de Escuelas",editMode:!1,selected:null,customActions:[],facultad:{}};var p={facultad_id:e.id,name:"Escuela",form:"views/escuelas/form.html",route:"escuelas"};o.one("facultades",p.facultad_id).get({single:!0}).then(function(e){n.UI.facultad=e}),f=o.all(p.route),a.app.module=" > "+p.name,m=function(){n.tableParams=new s({page:1,count:10,filter:{_facultad:p.facultad_id}},{total:0,getData:function(e,t){var a;a=t.url(),n.UI.refresh=!0,f.customGET("methods/paginate",a).then(function(a){i(function(){t.total(a.total),e.resolve(a.data),n.UI.refresh=!1},500)})}})},n.Refresh=function(){n.UI.selected=null,n.UI.editMode=!1,n.tableParams.reload()},n.New=function(e){var t=angular.element(document.body);l.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:n.tableParams,facultad:n.UI.facultad},controller:function(e,t,a,n,o){e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.model={_facultad:o},e.Buttons=n.Buttons,e.message=n.Form,e.Save=function(a){e.submited=!0,a.$valid&&f.post(e.model).then(function(){u.success(n.Form.Saved),l.hide(),t.reload()})},e.Cancel=function(){l.hide()}}})},n.Edit=function(e){var t=angular.element(document.body);l.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:n.tableParams,model:o.copy(n.UI.selected)},controller:function(e,t,a,n,o){e.submited=!1,e.model=o,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){u.success(n.Form.Updated),l.hide(),t.reload()})},e.Cancel=function(){l.hide()}}})},n.Delete=function(e){var a=l.confirm().title(p.name).content(t.Form.QuestionDelete).ariaLabel(p.name).targetEvent(e).ok(t.Buttons.Yes).cancel(t.Buttons.No),i=o.copy(n.UI.selected);l.show(a).then(function(){i.remove().then(function(){n.Refresh(),u.success(t.Form.Deleted)})},function(){})},n.EnabledEdit=function(e){n.UI.editMode=!1,n.UI.selected=null,angular.forEach(n.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(n.UI.editMode=!0,n.UI.selected=e,n.UI.selected.route=p.route)},new m})}.call(this),function(){"use strict";angular.module("unuApp").controller("FacultadesCtrl",["MessageFactory","$rootScope","$scope","Restangular","$mdDialog","$timeout","ngTableParams","LxDialogService","ToastMD","$mdBottomSheet","$state",function(e,t,a,n,o,l,i,s,r,u,c){var d,m;a.UI={refresh:!1,message:e,title:"Listado de Facultades",editMode:!1,selected:null,customActions:[]};var f={name:"Facultad",form:"views/facultades/form.html",route:"facultades"};m=n.all(f.route),t.app.module=" > "+f.name,a.UI.customActions.push({label:"Escuelas",onclick:function(){c.go("app.escuelas",{id:a.UI.selected._id})}}),d=function(){a.tableParams=new i({page:1,count:10},{total:0,getData:function(e,t){var n;n=t.url(),a.UI.refresh=!0,m.customGET("methods/paginate",n).then(function(n){l(function(){t.total(n.total),e.resolve(n.data),a.UI.refresh=!1},500)})}}),a.tableParams.settings({counts:[]})},a.Refresh=function(){a.UI.selected=null,a.UI.editMode=!1,a.tableParams.reload()},a.New=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{service:m,name:f.name,table:a.tableParams},controller:"FacultadNewCtrl"})},a.Edit=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{name:f.name,table:a.tableParams,model:n.copy(a.UI.selected)},controller:"FacultadEditCtrl"})},a.Delete=function(t){var l=o.confirm().title(f.name).content(e.Form.QuestionDelete).ariaLabel(f.name).targetEvent(t).ok(e.Buttons.Yes).cancel(e.Buttons.No),i=n.copy(a.UI.selected);o.show(l).then(function(){i.remove().then(function(){a.Refresh(),r.success(e.Form.Deleted)})},function(){})},a.EnabledEdit=function(e){a.UI.editMode=!1,a.UI.selected=null,angular.forEach(a.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(a.UI.editMode=!0,a.UI.selected=e,a.UI.selected.route=f.route)},new d}]).controller("FacultadNewCtrl",["$scope","table","name","MessageFactory","$mdDialog","service","ToastMD",function(e,t,a,n,o,l,i){e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.Buttons=n.Buttons,e.message=n.Form,e.Save=function(a){e.submited=!0,a.$valid&&l.post(e.model).then(function(){i.success(n.Form.Saved),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}]).controller("FacultadEditCtrl",["$scope","table","name","MessageFactory","model","ToastMD","$mdDialog",function(e,t,a,n,o,l,i){e.submited=!1,e.model=o,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){l.success(n.Form.Updated),i.hide(),t.reload()})},e.Cancel=function(){i.hide()}}])}.call(this),function(){"use strict";angular.module("unuApp").controller("HomeCtrl",function(e,t,a,n,o,l,i){function s(e){return i.isSectionSelected(e)}function r(e){var t=!1,a=i.openedSection;return a===e?t=!0:e.children&&e.children.forEach(function(e){e===a&&(t=!0)}),t}var u=this;u.isOpen=s,u.toggleOpen=toggleOpen,u.isSectionSelected=r,u.autoFocusContent=!1,u.menu=i,u.close=close,console.log("menu: ",u.menu),u.status={isFirstOpen:!0,isFirstDisabled:!1},e.close=function(){return n("left").toggle().then(function(){o.debug("close sidenav")})},e.toggleOpen=function(e){i.toggleSelectSection(e)}})}(),function(){"use strict";angular.module("unuApp").controller("LoginCtrl",["$scope","UserFactory","$rootScope",function(e,t,a){e.Login=function(){t.login(e.user)},e.Reset=function(){}}])}.call(this),function(){"use strict";angular.module("unuApp").controller("PabellonesCtrl",function(e,t,a,n,o,l,i,s,r,u){var c,d;a.UI={refresh:!1,message:e,title:"Listado de Pabellones",editMode:!1,selected:null,customActions:[]};var m={name:"Pabellon",form:"views/pabellones/form.html",route:"pabellones"};d=n.all(m.route),t.app.module=" > "+m.name,c=function(){a.tableParams=new i({page:1,count:10},{total:0,getData:function(e,t){var n;n=t.url(),a.UI.refresh=!0,d.customGET("methods/paginate",n).then(function(n){l(function(){t.total(n.total),e.resolve(n.data),a.UI.refresh=!1;
},500)})}})},a.Refresh=function(){a.UI.selected=null,a.UI.editMode=!1,a.tableParams.reload()},a.New=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:m.form,locals:{name:m.name,table:a.tableParams},controller:function(e,t,a,n){e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.Buttons=n.Buttons,e.message=n.Form,e.Save=function(a){e.submited=!0,a.$valid&&d.post(e.model).then(function(){s.success(n.Form.Saved),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Edit=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:m.form,locals:{name:m.name,table:a.tableParams,model:n.copy(a.UI.selected)},controller:function(e,t,a,n,l){e.submited=!1,e.model=l,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){s.success(n.Form.Updated),o.hide(),t.reload()})},e.Cancel=function(){o.hide()}}})},a.Delete=function(t){var l=o.confirm().title(m.name).content(e.Form.QuestionDelete).ariaLabel(m.name).targetEvent(t).ok(e.Buttons.Yes).cancel(e.Buttons.No),i=n.copy(a.UI.selected);o.show(l).then(function(){i.remove().then(function(){a.Refresh(),s.success(e.Form.Deleted)})},function(){})},a.EnabledEdit=function(e){a.UI.editMode=!1,a.UI.selected=null,angular.forEach(a.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(a.UI.editMode=!0,a.UI.selected=e,a.UI.selected.route=m.route)},new c})}.call(this),function(){"use strict";angular.module("unuApp").controller("PeriodosCtrl",["MessageFactory","$rootScope","$scope","Restangular","$mdDialog","$timeout","NgTableParams","ToastMD",function(e,t,a,n,o,l,i,s){var r,u;a.UI={refresh:!1,message:e,title:"Listado de Periodos",editMode:!1,selected:null,customActions:[]};var c={name:"Periodo",form:"views/periodos/form.html",route:"periodos"};u=n.all(c.route),t.app.module=" > "+c.name,r=function(){a.tableParams=new i({page:1,count:10},{total:0,getData:function(e,t){var n;n=t.url(),a.UI.refresh=!0,u.customGET("methods/paginate",n).then(function(n){l(function(){t.total(n.total),e.resolve(n.data),a.UI.refresh=!1},500)})}})},a.Refresh=function(){a.UI.selected=null,a.UI.editMode=!1,a.tableParams.reload()},a.New=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:c.form,locals:{name:c.name,table:a.tableParams,service:u},controller:"PeriodoNewCtrl"})},a.Edit=function(e){var t=angular.element(document.body);o.show({parent:t,targetEvent:e,templateUrl:c.form,locals:{name:c.name,table:a.tableParams,model:n.copy(a.UI.selected)},controller:"PeriodoEditCtrl"})},a.Delete=function(t){var l=o.confirm().title(c.name).content(e.Form.QuestionDelete).ariaLabel(c.name).targetEvent(t).ok(e.Buttons.Yes).cancel(e.Buttons.No),i=n.copy(a.UI.selected);o.show(l).then(function(){i.remove().then(function(){a.Refresh(),s.info(e.Form.Deleted)})},function(){})},a.EnabledEdit=function(e){a.UI.editMode=!1,a.UI.selected=null,angular.forEach(a.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(a.UI.editMode=!0,a.UI.selected=e,a.UI.selected.route=c.route)},new r}]).controller("PeriodoNewCtrl",["$scope","table","name","MessageFactory","service","ToastMD","$mdDialog",function(e,t,a,n,o,l,i){e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.Buttons=n.Buttons,e.message=n.Form,e.Save=function(a){e.submited=!0,a.$valid&&o.post(e.model).then(function(){l.info(n.Form.Saved),i.hide(),t.reload()})},e.Cancel=function(){i.hide()}}]).controller("PeriodoEditCtrl",["$scope","table","name","MessageFactory","model","ToastMD","$mdDialog",function(e,t,a,n,o,l,i){e.submited=!1,e.model=o,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){l.info(n.Form.Updated),i.hide(),t.reload()})},e.Cancel=function(){i.hide()}}])}.call(this),function(){"use strict";angular.module("unuApp").controller("PlanestudiosCtrl",["$mdSidenav","$q","MessageFactory","$rootScope","$scope","Restangular","$mdDialog","$timeout","NgTableParams","LxDialogService","ToastMD","$mdBottomSheet","$state",function(e,t,a,n,o,l,i,s,r,u,c,d,m){var f,p;o.UI={refresh:!1,message:a,title:"Listado de Planes de Estudio",editMode:!1,selected:null,customActions:[]};var g={name:"Plan de Estudio",form:"views/planestudios/form.html",route:"planestudios"};p=l.all(g.route),n.app.module=" > "+g.name,o.UI.customActions.push({icon:"fa-book",label:"Detalle Plan de Estudio",onclick:function(){m.go("app.planestudiodetalles",{id:o.UI.selected._id})}}),o.UI.customActions.push({icon:"fa-send",label:"Enviar para aprobación",onclick:function(){var e=l.copy(o.UI.selected);e.estado="Pendiente",e.put().then(function(){o.ListPlanEstudios()})}});var h=function(){var e=l.all("facultades");e.getList().then(function(e){o.facultades=e})};o.LoadEcuelas=function(){var e=l.all("escuelas");e.getList({conditions:{_facultad:o.filter._facultad._id},populate:"_facultad"}).then(function(e){o.escuelas=e})},o.ListPlanEstudios=function(){angular.extend(o.tableParams.filter(),{_escuela:o.filter._escuela._id}),o.tableParams.reload()},new h,f=function(){o.tableParams=new r({page:1,count:10,filter:{_escuela:0}},{total:0,getData:function(e,t){var a;a=t.url(),o.UI.refresh=!0,p.customGET("methods/paginate",a).then(function(a){s(function(){t.total(a.total),e.resolve(a.data),o.UI.refresh=!1},500)})}}),o.tableParams.settings({counts:[]})},o.Refresh=function(){o.UI.selected=null,o.UI.editMode=!1,o.tableParams.reload()},o.filter={},o.New=function(e){if(!o.filter._escuela)return void c.warning("Debe seleccionar una escuela antes de crear un plan de estudio");var t=angular.element(document.body);i.show({parent:t,targetEvent:e,templateUrl:g.form,locals:{name:g.name,table:o.tableParams,escuela:o.filter._escuela,service:p},controller:"PlanestudiosNewCtrl"})},o.Edit=function(e){var t=angular.element(document.body);i.show({parent:t,targetEvent:e,templateUrl:g.form,locals:{name:g.name,table:o.tableParams,model:l.copy(o.UI.selected),escuela:o.filter._escuela},controller:"PlanestudiosEditCtrl"})},o.Delete=function(e){var t=i.confirm().title(g.name).content(a.Form.QuestionDelete).ariaLabel(g.name).targetEvent(e).ok(a.Buttons.Yes).cancel(a.Buttons.No),n=l.copy(o.UI.selected);i.show(t).then(function(){n.remove().then(function(){o.Refresh(),c.info(a.Form.Deleted)})},function(){})},o.EnabledEdit=function(e){o.UI.editMode=!1,o.UI.selected=null,angular.forEach(o.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(o.UI.editMode=!0,o.UI.selected=e,o.UI.selected.route=g.route)},new f}]).controller("PlanestudiosNewCtrl",["$scope","table","name","MessageFactory","escuela","service","Restangular","ToastMD","$mdDialog",function(e,t,a,n,o,l,i,s,r){e.escuela=o,e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.Buttons=n.Buttons,e.message=n.Form,i.all("periodos").getList().then(function(t){e.periodos=t}),e.model={_escuela:o._id},e.Save=function(a){e.submited=!0,a.$valid&&l.post(e.model).then(function(){s.info(n.Form.Saved),r.hide(),t.reload()})},e.Cancel=function(){r.hide()}}]).controller("PlanestudiosEditCtrl",["$scope","table","name","MessageFactory","model","escuela","Restangular","ToastMD","$mdDialog",function(e,t,a,n,o,l,i,s,r){e.escuela=l,e.submited=!1,e.model=o,e.model.fecha_resolucion=new Date(e.model.fecha_resolucion),e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,i.all("periodos").getList().then(function(t){e.periodos=t}),e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){s.info(n.Form.Updated),r.hide(),t.reload()})},e.Cancel=function(){r.hide()}}])}.call(this),function(){"use strict";angular.module("unuApp").controller("PlanEstudioDetallesCtrl",["$mdSidenav","$q","$stateParams","MessageFactory","$rootScope","$scope","Restangular","$mdDialog","$timeout","NgTableParams","LxDialogService","ToastMD",function(e,t,a,n,o,l,i,s,r,u,c,d){var m,f;l.UI={refresh:!1,message:n,title:"Plan de Estudios",editMode:!1,selected:null,customActions:[],facultad:{}};var p={planestudioId:a.id,name:"Detalle Plan de Estudios",form:"views/planestudiodetalles/form.html",route:"planestudiodetalles"};i.one("planestudios",p.planestudioId).get({single:!0,populate:"_periodo _escuela"}).then(function(e){l.UI.planestudios=e}),f=i.all(p.route),o.app.module=" > "+p.name,l.UI.customActions.push({icon:"fa-comments-o",label:"Comentarios",onclick:function(){$state.go("app.planestudiodetalles",{id:l.UI.selected._id})}}),l.ShowComments=function(){e("right").toggle().then(function(){})},m=function(){l.tableParams=new u({page:1,count:1e3,filter:{_planestudio:p.planestudioId}},{total:0,groupBy:"ciclo",counts:[],getData:function(e,t){var a;a=t.url(),l.UI.refresh=!0,f.customGET("methods/paginate",a).then(function(a){r(function(){t.total(a.total),e.resolve(a.data),l.UI.refresh=!1},500)})}})},l.getCreditosCiclo=function(e){var t=0;return angular.forEach(e,function(e){t+=e.creditos}),t},l.getHorasCiclo=function(e){var t=0;return angular.forEach(e,function(e){t+=e.horas_total}),t},l.Refresh=function(){l.UI.selected=null,l.UI.editMode=!1,l.tableParams.reload()},l.New=function(e){var t=angular.element(document.body);s.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:l.tableParams,planestudios:l.UI.planestudios},controller:"PlanestudiosNewCtrl"})},l.Edit=function(e){var t=angular.element(document.body);s.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:l.tableParams,model:i.copy(l.UI.selected),planestudios:l.UI.planestudios},controller:"PlanestudiosEditCtrl"})},l.Delete=function(e){var t=s.confirm().title(p.name).content(n.Form.QuestionDelete).ariaLabel(p.name).targetEvent(e).ok(n.Buttons.Yes).cancel(n.Buttons.No),a=i.copy(l.UI.selected);s.show(t).then(function(){a.remove().then(function(){l.Refresh(),d.info(n.Form.Deleted)})},function(){})},l.EnabledEdit=function(e,t){console.log(t),l.UI.editMode=!1,l.UI.selected=null,angular.forEach(t,function(t){angular.forEach(t.data,function(t){e._id!==t._id&&(t.active=!1)})}),e.active&&(l.UI.editMode=!0,l.UI.selected=e,l.UI.selected.route=p.route)},new m}]).controller("PlanestudiosNewCtrl",["$scope","table","name","MessageFactory","planestudios","$timeout","ToastMD","$mdDialog","Restangular",function(e,t,a,n,o,l,i,s,r){e.cursoFound=!1,e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.model={_curso:{codigo:"",nombre:"",tipo:"Carrera"},_requisitos:[]},e.model._planestudio=o._id,e.Buttons=n.Buttons,e.message=n.Form;var u,c="",d=r.all("cursos"),m=r.all("planestudiodetalles"),f=function(){m.getList({populate:"_curso",conditions:{_planestudio:o._id}}).then(function(t){e.requisitos=t})};e.FilterRequisitos=function(t){var a=[];return angular.forEach(e.requisitos,function(e){var n=e._curso.nombre.search(new RegExp(t,"i"));n>=0&&a.push(e)}),a},e.AgregarRequisito=function(){e.model._requisitos.push(e._requisito)},e.$watch("model._curso.codigo",function(t){t.length>0&&(u&&l.cancel(u),c=t,u=l(function(){e.model._curso.codigo=c,d.getList({conditions:{codigo:e.model._curso.codigo}}).then(function(t){t.length>0?(e.model._curso=t[0],e.cursoFound=!0):(e.model._curso={codigo:c},e.cursoFound=!1)})},1e3))}),e.Save=function(t){e.submited=!0,t.$valid&&(e.cursoFound?new p:d.post(e.model._curso).then(function(t){e.model._curso=t._id,new p}))};var p=function(){m.post(e.model).then(function(){i.info(n.Form.Saved),s.hide(),t.reload()})};e.Cancel=function(){s.hide()},e.CalcularTotalHoras=function(){e.model.horas_total=parseInt(e.model.horas_teoria)+parseInt(e.model.horas_practica)+parseInt(e.model.horas_laboratorio)},new f}]).controller("PlanestudiosEditCtrl",[function(e,t,a,n,o,l,i,s,r){e.submited=!1,e.model=o,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons;var u=r.all("planestudiodetalles"),c=function(){u.getList({populate:"_curso",conditions:{_planestudio:l._id}}).then(function(t){e.requisitos=t})};e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){i.info(n.Form.Updated),s.hide(),t.reload()})},e.AgregarRequisito=function(){e.model._requisitos.push(e._requisito)},e.Cancel=function(){s.hide()},e.CalcularTotalHoras=function(){e.model.horas_total=parseInt(e.model.horas_teoria)+parseInt(e.model.horas_practica)+parseInt(e.model.horas_laboratorio)},new c}])}.call(this),function(){"use strict";angular.module("unuApp").controller("SidenavCtrl",["$scope","$rootScope","$mdSidenav",function(e,t,a){console.log(t.menu),this.autoFocusContent=!1,this.isOpen=function(){},e.close=function(){return a("left").toggle().then(function(){})},e.toggle=function(){return a("left").toggle().then(function(){})},e.toggleMenu=function(){}}])}.call(this),function(){"use strict";angular.module("unuApp").controller("MICAsignaturasCtrl",function(e,t,a,n,o,l,i,s,r,u,c){var d,m;o.UI={refresh:!1,message:a,title:"Listado de Asignaturas",editMode:!1,selected:null,customActions:[]};var f={name:"Asignatura",form:"views/mic/asignaturas/form.html",route:"mic_asignaturas"};m=l.all(f.route),n.app.module=" > "+f.name,d=function(){o.tableParams=new r({page:1,count:10},{total:0,getData:function(e,t){var a;a=t.url(),o.UI.refresh=!0,m.customGET("methods/paginate",a).then(function(a){s(function(){t.total(a.total),e.resolve(a.data),o.UI.refresh=!1},500)})}})},o.Refresh=function(){o.UI.selected=null,o.UI.editMode=!1,o.tableParams.reload()},o.New=function(e){var t=angular.element(document.body);i.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{name:f.name,table:o.tableParams},controller:function(e,t,a,n){e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.Buttons=n.Buttons,e.message=n.Form;var o,r="",u=l.all("cursos");e.$watch("model._curso.codigo",function(t){t.length>0&&(o&&s.cancel(o),r=t,o=s(function(){e.model._curso.codigo=r,u.getList({conditions:{codigo:e.model._curso.codigo}}).then(function(t){t.length>0?(e.model._curso=t[0],e.cursoFound=!0):(e.model._curso={codigo:r},e.cursoFound=!1)})},1e3))}),e.Save=function(a){if(e.submited=!0,a.$valid){var o=e.model._curso._id,l=angular.copy(e.model);l._curso=o,delete l.curso,m.post(l).then(function(){c.success(n.Form.Saved),i.hide(),t.reload()},function(t){switch(console.log(t),t.status){case 422:e.ValidationError=t.data}})}},e.Cancel=function(){i.hide()}}})},o.Edit=function(e){var t=angular.element(document.body);i.show({parent:t,targetEvent:e,templateUrl:f.form,locals:{name:f.name,table:o.tableParams,model:l.copy(o.UI.selected)},controller:function(e,t,a,n,o){e.submited=!1,e.model=o,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){c.success(n.Form.Updated),i.hide(),t.reload()})},e.Cancel=function(){i.hide()}}})},o.Delete=function(e){var t=i.confirm().title(f.name).content(a.Form.QuestionDelete).ariaLabel(f.name).targetEvent(e).ok(a.Buttons.Yes).cancel(a.Buttons.No),n=l.copy(o.UI.selected);i.show(t).then(function(){n.remove().then(function(){o.Refresh(),c.success(a.Form.Deleted)})},function(){})},o.EnabledEdit=function(e){o.UI.editMode=!1,o.UI.selected=null,angular.forEach(o.tableParams.data,function(t){e._id!==t._id&&(t.active=!1)}),e.active&&(o.UI.editMode=!0,o.UI.selected=e,o.UI.selected.route=f.route)},new d})}.call(this),function(){"use strict";angular.module("unuApp").controller("MICRevisionPlanEstudiosCtrl",function(e,t,a,n,o,l,i,s,r,u,c){var d,m,f;o.UI={refresh:!1,message:a,title:"Validación del Plan de Estudios",editMode:!1,selected:null,customActions:[],facultad:{},asignaturas:[],asignaturasNoexistentes:[]};var p={planestudioId:t.id,name:"Validación del Plan de Estudios",form:"views/planestudiodetalles/form.html",route:"planestudiodetalles",routeAsignaturas:"mic_asignaturas",routePlan:"planestudios"};l.one("planestudios",p.planestudioId).get({single:!0}).then(function(e){o.UI.planestudios=e}),m=l.all(p.route),n.app.module=" > "+p.name;var g=function(){var e=l.all("facultades");e.getList().then(function(e){o.facultades=e})};o.LoadEcuelas=function(){var e=l.all("escuelas");e.getList({conditions:{_facultad:o.filter._facultad._id},populate:"_facultad"}).then(function(e){o.escuelas=e})},o.LoadPlanEstudios=function(){o.planes=[];var e=l.all(p.routePlan);e.getList({conditions:{_escuela:o.filter._escuela._id},populate:"_escuela"}).then(function(e){o.planes=e})},o.Refresh=function(){o.UI.selected=null,o.UI.editMode=!1,o.tableParams.filter({_planestudio:o.filter._planestudio._id}),o.tableParams.reload()},d=function(){o.tableParams=new r({page:1,count:500,filter:{_planestudio:0}},{total:0,groupBy:"ciclo",getData:function(e,t){var a;a=t.url(),o.UI.refresh=!0,m.customGET("methods/paginate",a).then(function(a){s(function(){t.total(a.total),e.resolve(a.data),o.UI.refresh=!1},500)})}}),o.tableParams.settings({counts:[]})},f=function(){var e=l.all(p.routeAsignaturas);e.getList({populate:{path:"_curso"}}).then(function(e){o.UI.asignaturas=e})},o.RevisarPlan=function(){angular.forEach(o.UI.asignaturas,function(e){var t=!1;angular.forEach(o.tableParams.data,function(a){angular.forEach(a.data,function(a){a._curso._id===e._curso._id&&(a.existsAsignatura=!0,t=!0)})}),t||o.UI.asignaturasNoexistentes.push(e)})},o.New=function(e){var t=angular.element(document.body);i.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:o.tableParams,planestudios:o.UI.planestudios},controller:function(e,t,a,n,o,s){e.cursoFound=!1,e.submited=!1,e.title=n.Form.New.replace("{element}",a),e.model={_curso:{codigo:"",nombre:"",tipo:"Carrera"}},e.model._planestudio=o._id,e.Buttons=n.Buttons,e.message=n.Form;var r,u="",d=l.all("cursos"),m=l.all("planestudiodetalles");e.$watch("model._curso.codigo",function(t){t.length>0&&(r&&s.cancel(r),u=t,r=s(function(){e.model._curso.codigo=u,d.getList({conditions:{codigo:e.model._curso.codigo}}).then(function(t){t.length>0?(e.model._curso=t[0],e.cursoFound=!0):(e.model._curso={codigo:u},e.cursoFound=!1)})},1e3))}),e.Save=function(t){e.submited=!0,t.$valid&&(e.cursoFound?new f:d.post(e.model._curso).then(function(t){e.model._curso=t._id,new f}))};var f=function(){m.post(e.model).then(function(){c.info(n.Form.Saved),i.hide(),t.reload()})};e.Cancel=function(){i.hide()}}})},o.Edit=function(e){var t=angular.element(document.body);i.show({parent:t,targetEvent:e,templateUrl:p.form,locals:{name:p.name,table:o.tableParams,model:l.copy(o.UI.selected)},controller:function(e,t,a,n,o){e.submited=!1,e.model=o,e.title=n.Form.Edit.replace("{element}",a),e.Buttons=n.Buttons,e.Save=function(a){e.submited=!0,a.$valid&&e.model.put().then(function(){c.info(n.Form.Updated),i.hide(),t.reload()})},e.Cancel=function(){i.hide()}}})},o.Delete=function(e){var t=i.confirm().title(p.name).content(a.Form.QuestionDelete).ariaLabel(p.name).targetEvent(e).ok(a.Buttons.Yes).cancel(a.Buttons.No),n=l.copy(o.UI.selected);i.show(t).then(function(){n.remove().then(function(){o.Refresh(),c.info(a.Form.Deleted)})},function(){})},o.EnabledEdit=function(e,t){console.log(t),o.UI.editMode=!1,o.UI.selected=null,angular.forEach(t,function(t){angular.forEach(t.data,function(t){e._id!==t._id&&(t.active=!1)})}),e.active&&(o.UI.editMode=!0,o.UI.selected=e,o.UI.selected.route=p.route)},new d,new g,new f})}.call(this),function(){"use strict";angular.module("unuApp").controller("MICSesionAprendizajeCtrl",function(e,t,a,n,o,l,i,s,r,u){var c,d;l.UI={refresh:!1,message:n,title:"Sesión de Aprendizaje",editMode:!1,selected:null,customActions:[],facultad:{},asignaturas:[],asignaturasNoexistentes:[]};var m={planestudioId:a.id,name:"Registro de Silabus por Plan de Estudios",form:"views/sesionaprendizaje/form.html",route:"planestudiodetalles",routePlan:"planestudios"};i.one("planestudios",m.planestudioId).get({single:!0}).then(function(e){l.UI.planestudios=e}),d=i.all(m.route),o.app.module=" > "+m.name;var f=function(){var e=i.all("facultades");e.getList().then(function(e){l.facultades=e})};l.LoadEcuelas=function(){var e=i.all("escuelas");e.getList({conditions:{_facultad:l.filter._facultad._id},populate:"_facultad"}).then(function(e){l.escuelas=e})},l.LoadPlanEstudios=function(){l.planes=[];var e=i.all(m.routePlan);e.getList({conditions:{_escuela:l.filter._escuela._id},populate:"_escuela"}).then(function(e){l.planes=e})},c=function(){l.tableParams=new u({page:1,count:500,filter:{_planestudio:0}},{total:0,groupBy:"ciclo",getData:function(e,t){var a;a=t.url(),l.UI.refresh=!0,d.customGET("methods/paginate",a).then(function(a){r(function(){t.total(a.total),e.resolve(a.data),l.UI.refresh=!1},500)})}}),l.tableParams.settings({counts:[]})},l.RevisarPlan=function(){angular.forEach(l.UI.asignaturas,function(e){var t=!1;angular.forEach(l.tableParams.data,function(a){angular.forEach(a.data,function(a){a._curso._id===e._curso._id&&(a.existsAsignatura=!0,t=!0)})}),t||l.UI.asignaturasNoexistentes.push(e)})},l.Refresh=function(){l.UI.selected=null,l.UI.editMode=!1,l.tableParams.filter({_planestudio:l.filter._planestudio._id}),l.tableParams.reload()},l.Edit=function(t){e.go("app.mic_sesionaprendizaje_detalle",{id:l.UI.selected._id})},l.EnabledEdit=function(e,t){console.log(t),l.UI.editMode=!1,l.UI.selected=null,angular.forEach(t,function(t){angular.forEach(t.data,function(t){e._id!==t._id&&(t.active=!1)})}),e.active&&(l.UI.editMode=!0,l.UI.selected=e,l.UI.selected.route=m.route)},new c,new f})}.call(this),function(){"use strict";angular.module("unuApp").controller("MICSesionaprendizajeDetalleCtrl",function(e,t,a,n,o,l,i,s,r,u,c){o.UI={refresh:!1,message:a,title:"Registro de Sesión de Aprendizaje",editMode:!1,selected:null,customActions:[],facultad:{},asignaturas:[],unidades:[]};({planestudioId:t.id,name:"Sesión de Aprendizaje",form:"views/planestudiodetalles/form.html",route:"planestudiodetalles",routePlan:"planestudios"});o.AddUnidad=function(){o.UI.unidades.push({titulo:"",inicio:"",fin:""})}})}.call(this),function(){"use strict";angular.module("unuApp").controller("MICSilabusCtrl",function(e,t,a,n,o,l,i,s,r,u){var c,d;l.UI={refresh:!1,message:n,title:"Registro de Silabus por Plan de Estudios",editMode:!1,selected:null,customActions:[],facultad:{},asignaturas:[],asignaturasNoexistentes:[]};var m={planestudioId:a.id,name:"Registro de Silabus por Plan de Estudios",form:"views/planestudiodetalles/form.html",route:"planestudiodetalles",routePlan:"planestudios"};i.one("planestudios",m.planestudioId).get({single:!0}).then(function(e){l.UI.planestudios=e}),d=i.all(m.route),o.app.module=" > "+m.name;var f=function(){var e=i.all("facultades");e.getList().then(function(e){l.facultades=e})};l.LoadEcuelas=function(){var e=i.all("escuelas");e.getList({conditions:{_facultad:l.filter._facultad._id},populate:"_facultad"}).then(function(e){l.escuelas=e})},l.LoadPlanEstudios=function(){l.planes=[];var e=i.all(m.routePlan);e.getList({conditions:{_escuela:l.filter._escuela._id},populate:"_escuela"}).then(function(e){l.planes=e})},c=function(){l.tableParams=new u({page:1,count:500,filter:{_planestudio:0}},{total:0,groupBy:"ciclo",getData:function(e,t){var a;a=t.url(),l.UI.refresh=!0,d.customGET("methods/paginate",a).then(function(a){r(function(){t.total(a.total),e.resolve(a.data),l.UI.refresh=!1},500)})}}),l.tableParams.settings({counts:[]})},l.RevisarPlan=function(){angular.forEach(l.UI.asignaturas,function(e){var t=!1;angular.forEach(l.tableParams.data,function(a){angular.forEach(a.data,function(a){a._curso._id===e._curso._id&&(a.existsAsignatura=!0,t=!0)})}),t||l.UI.asignaturasNoexistentes.push(e)})},l.Refresh=function(){l.UI.selected=null,l.UI.editMode=!1,l.tableParams.filter({_planestudio:l.filter._planestudio._id}),l.tableParams.reload()},l.Edit=function(t){e.go("app.mic_silabus_detalle",{id:l.UI.selected._id})},l.EnabledEdit=function(e,t){console.log(t),l.UI.editMode=!1,l.UI.selected=null,angular.forEach(t,function(t){angular.forEach(t.data,function(t){e._id!==t._id&&(t.active=!1)})}),e.active&&(l.UI.editMode=!0,l.UI.selected=e,l.UI.selected.route=m.route)},new c,new f})}.call(this),function(){"use strict";angular.module("unuApp").controller("MICSilabusDetalleCtrl",function(e,t,a,n,o,l,i,s,r,u,c){o.UI={refresh:!1,message:a,title:"Registro de Silabus por Plan de Estudios",editMode:!1,selected:null,customActions:[],facultad:{},asignaturas:[],unidades:[]};({planestudioId:t.id,name:"Registro de Silabus por Plan de Estudios",form:"views/planestudiodetalles/form.html",route:"planestudiodetalles",routePlan:"planestudios"});o.AddUnidad=function(){o.UI.unidades.push({titulo:"",inicio:"",fin:""})}})}.call(this);